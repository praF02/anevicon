language: rust

rust:
  - stable

# We want to see a call stack if something has failed to examine
# what happened, so set `RUST_BACKTRACE`
env:
  - RUST_BACKTRACE=1

# We want to check for any warnings and errors in this crate, so
# install Clippy:
before_script:
  - rustup component add clippy

script:
  - cargo build --all --verbose

# Let Clippy also check the tests and non-default crate features
# to ensure that the code is correct
  - cargo clippy --all --all-targets --all-features
  - cargo test --all